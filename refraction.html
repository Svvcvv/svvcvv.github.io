<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>激光折射模拟器</title>
    <script src="assets/js/taiwindcss.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .bg-glass {
                background: rgba(255, 255, 255, 0.7);
                backdrop-filter: blur(10px);
            }
            .water-gradient {
                background: linear-gradient(to bottom, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.6));
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col items-center justify-center p-4 md:p-8 font-sans text-dark">
    <div class="w-full max-w-4xl mx-auto">
        <!-- 页面标题 -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-dark text-shadow mb-2">激光射入水中折射模拟器</h1>
            <p class="text-gray-600 max-w-2xl mx-auto text-[clamp(1rem,2vw,1.2rem)]">
                调整入射角观察光在空气和水界面的折射现象，入射角超过48.6°时会发生全反射
            </p>
        </header>

        <!-- 主内容区 -->
        <main class="bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl">
            <!-- 控制面板 -->
            <div class="p-6 md:p-8 bg-glass border-b border-gray-200">
                <div class="flex flex-col md:flex-row md:items-center gap-6">
                    <div class="flex-1">
                        <label for="angleSlider" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fa fa-arrows-h mr-2" aria-hidden="true"></i>入射角 (θ₁):
                        </label>
                        <div class="flex items-center gap-3">
                            <input type="range" id="angleSlider" min="0" max="90" value="30" 
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                            <span id="angleValue" class="text-xl font-semibold text-primary min-w-[4rem] text-center">30°</span>
                        </div>
                    </div>
                    
                    <div class="flex-1">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fa fa-lightbulb-o mr-2" aria-hidden="true"></i>折射角 (θ₂):
                        </label>
                        <div class="bg-gray-50 p-3 rounded-lg flex items-center">
                            <span id="refractionAngle" class="text-xl font-semibold text-secondary">19.47°</span>
                            <span id="totalReflection" class="ml-3 text-danger font-semibold hidden">
                                <i class="fa fa-exclamation-triangle mr-1" aria-hidden="true"></i>全反射
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- 物理公式 -->
                <div class="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-100">
                    <p class="text-sm text-gray-700">
                        <i class="fa fa-book mr-2" aria-hidden="true"></i>斯涅尔定律: n₁·sin(θ₁) = n₂·sin(θ₂)
                    </p>
                    <p class="text-sm text-gray-700 mt-1">
                        <i class="fa fa-info-circle mr-2" aria-hidden="true"></i>
                        其中 n₁=1.00 (空气), n₂=1.33 (水), 临界角 ≈ 48.6°
                    </p>
                </div>
            </div>

            <!-- 模拟区域 -->
            <div class="relative w-full h-[400px] overflow-hidden">
                <!-- 水面 -->
                <div class="absolute inset-x-0 top-1/2 h-0.5 bg-gray-400 z-10 shadow-md"></div>
                
                <!-- 空气区域 -->
                <div class="absolute inset-x-0 top-0 bottom-1/2 bg-blue-50"></div>
                
                <!-- 水区域 -->
                <div class="absolute inset-x-0 top-1/2 bottom-0 water-gradient"></div>
                
                <!-- 法线 -->
                <div id="normalLine" class="absolute left-1/2 top-0 bottom-0 w-0.5 bg-gray-500 z-10"></div>
                
                <!-- 入射光线 -->
                <div id="incidentRay" class="absolute top-0 left-1/2 h-1/2 w-0.5 bg-yellow-500 origin-bottom transform-gpu transition-transform duration-300" style="transform: rotate(30deg);"></div>
                
                <!-- 反射光线 -->
                <div id="reflectedRay" class="absolute top-0 left-1/2 h-1/2 w-0.5 bg-yellow-500 origin-bottom transform-gpu transition-transform duration-300" style="transform: rotate(-30deg); opacity: 0.8;"></div>
                
                <!-- 折射光线 -->
                <div id="refractedRay" class="absolute top-1/2 left-1/2 h-1/2 w-0.5 bg-yellow-500 origin-top transform-gpu transition-all duration-300" style="transform: rotate(-19.47deg);"></div>
                
                <!-- 角度标记 -->
                <svg id="angleIndicator" class="absolute left-1/2 top-1/2 w-32 h-32 -ml-16 -mt-16 z-20 pointer-events-none">
                    <circle cx="16" cy="16" r="12" fill="none" stroke="rgba(156, 163, 175, 0.3)" stroke-width="1" />
                    <path id="incidentAngleArc" d="M16,16 L16,4 L28.8,8" fill="none" stroke="#3B82F6" stroke-width="1.5" />
                    <path id="refractedAngleArc" d="M16,16 L16,28 L28.8,24" fill="none" stroke="#10B981" stroke-width="1.5" />
                </svg>
                
                <!-- 光源 -->
                <div id="lightSource" class="absolute top-0 left-1/2 w-6 h-6 -ml-3 -mt-3 bg-yellow-400 rounded-full shadow-lg flex items-center justify-center z-30 transform-gpu transition-transform duration-300" style="transform: translate(15px, 0);">
                    <i class="fa fa-lightbulb-o text-yellow-800" aria-hidden="true"></i>
                </div>
            </div>
        </main>

        <!-- 说明部分 -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-6 md:p-8">
            <h2 class="text-xl font-bold text-dark mb-4">关于光的折射</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <p class="text-gray-700 mb-4">
                        当光线从一种介质进入另一种介质时，由于光速变化，光线会发生弯曲，这种现象称为折射。
                        根据斯涅尔定律，入射角和折射角满足关系：n₁·sin(θ₁) = n₂·sin(θ₂)，其中n₁和n₂分别是两种介质的折射率。
                    </p>
                    <p class="text-gray-700">
                        当光线从光密介质（如水）射向光疏介质（如空气）时，如果入射角超过临界角，光线将不会折射到另一种介质中，而是全部反射回原介质，这种现象称为全反射。
                    </p>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                    <h3 class="font-semibold text-blue-800 mb-2">关键知识点</h3>
                    <ul class="list-disc pl-5 text-gray-700 space-y-2">
                        <li>空气的折射率约为1.00</li>
                        <li>水的折射率约为1.33</li>
                        <li>水到空气的临界角约为48.6°</li>
                        <li>入射角越大，折射角越大</li>
                        <li>当入射角大于临界角时，发生全反射</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <footer class="bg-neutral-800 text-neutral-300 py-6 mt-20">
            <div class="max-w-6xl mx-auto px-4 text-center text-sm">
                <p class="mb-2">蚊!帐! [○･｀Д´･ ○]--Rooteater</p>
                <p class="text-neutral-500">© 2025 All Rights Reserved</p>
            </div>
        </footer>
    </div>

    <script>
        // 获取DOM元素
        const angleSlider = document.getElementById('angleSlider');
        const angleValue = document.getElementById('angleValue');
        const refractionAngle = document.getElementById('refractionAngle');
        const totalReflection = document.getElementById('totalReflection');
        const incidentRay = document.getElementById('incidentRay');
        const reflectedRay = document.getElementById('reflectedRay');
        const refractedRay = document.getElementById('refractedRay');
        const lightSource = document.getElementById('lightSource');
        const incidentAngleArc = document.getElementById('incidentAngleArc');
        const refractedAngleArc = document.getElementById('refractedAngleArc');

        // 物理常量
        const REFRACTIVE_INDEX_AIR = 1.00;    // 空气折射率
        const REFRACTIVE_INDEX_WATER = 1.33;  // 水折射率
        const CRITICAL_ANGLE = Math.asin(REFRACTIVE_INDEX_AIR / REFRACTIVE_INDEX_WATER) * (180 / Math.PI); // 临界角约48.6°

        // 更新折射模拟
        function updateRefractionSimulation(angle) {
            // 更新显示的入射角
            angleValue.textContent = `${angle}°`;
            
            // 计算反射角（等于入射角）
            const reflectionAngle = -angle;
            
            // 计算折射角（使用斯涅尔定律）
            let refractionAngleValue;
            let isTotalReflection = false;
            
            // 当入射角大于临界角时发生全反射
            if (angle >= CRITICAL_ANGLE) {
                isTotalReflection = true;
                refractionAngleValue = 0; // 全反射时没有折射光线
            } else {
                // 斯涅尔定律：n₁·sin(θ₁) = n₂·sin(θ₂)
                const sinTheta2 = (REFRACTIVE_INDEX_AIR / REFRACTIVE_INDEX_WATER) * Math.sin(angle * Math.PI / 180);
                refractionAngleValue = Math.asin(sinTheta2) * (180 / Math.PI);
                refractionAngleValue = Math.round(refractionAngleValue * 100) / 100; // 保留两位小数
            }
            
            // 更新UI显示
            refractionAngle.textContent = isTotalReflection ? '0°' : `${refractionAngleValue}°`;
            totalReflection.classList.toggle('hidden', !isTotalReflection);
            refractedRay.style.opacity = isTotalReflection ? '0' : '1';
            
            // 更新光线角度
            incidentRay.style.transform = `rotate(${angle}deg)`;
            reflectedRay.style.transform = `rotate(${reflectionAngle}deg)`;
            refractedRay.style.transform = `rotate(${-refractionAngleValue}deg)`;
            
            // 更新光源位置
            const sourceDistance = 15; // 光源距离法线的距离
            const sourceX = Math.sin(angle * Math.PI / 180) * sourceDistance;
            lightSource.style.transform = `translate(${sourceX}px, 0)`;
            
            // 更新角度指示弧
            updateAngleIndicator(angle, refractionAngleValue, isTotalReflection);
        }
        
        // 更新角度指示弧
        function updateAngleIndicator(incidentAngle, refractionAngleValue, isTotalReflection) {
            const radius = 12; // 角度指示圆弧半径
            const centerX = 16;
            const centerY = 16;
            
            // 入射角度弧
            const incidentEndX = centerX + radius * Math.sin(incidentAngle * Math.PI / 180);
            const incidentEndY = centerY - radius * Math.cos(incidentAngle * Math.PI / 180);
            incidentAngleArc.setAttribute('d', `M${centerX},${centerY} L${centerX},${centerY-radius} L${incidentEndX},${incidentEndY}`);
            
            // 折射角度弧
            if (isTotalReflection) {
                refractedAngleArc.setAttribute('d', `M${centerX},${centerY} L${centerX},${centerY+radius} L${centerX},${centerY+radius}`);
                refractedAngleArc.setAttribute('stroke-opacity', '0');
            } else {
                const refractedEndX = centerX + radius * Math.sin(refractionAngleValue * Math.PI / 180);
                const refractedEndY = centerY + radius * Math.cos(refractionAngleValue * Math.PI / 180);
                refractedAngleArc.setAttribute('d', `M${centerX},${centerY} L${centerX},${centerY+radius} L${refractedEndX},${refractedEndY}`);
                refractedAngleArc.setAttribute('stroke-opacity', '1');
            }
        }
        
        // 初始化模拟
        updateRefractionSimulation(parseInt(angleSlider.value));
        
        // 滑块事件监听
        angleSlider.addEventListener('input', function() {
            updateRefractionSimulation(parseInt(this.value));
        });
        
        // 添加动画效果
        document.addEventListener('DOMContentLoaded', function() {
            // 初始动画
            setTimeout(() => {
                document.querySelector('main').classList.add('scale-100');
                document.querySelector('main').classList.remove('scale-95', 'opacity-0');
            }, 100);
            
            // 滑块变化动画
            angleSlider.addEventListener('input', function() {
                this.classList.add('ring-2', 'ring-primary/50');
                setTimeout(() => {
                    this.classList.remove('ring-2', 'ring-primary/50');
                }, 300);
            });
        });
    </script>
</body>
</html>
    