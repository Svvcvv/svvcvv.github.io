<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tools - Rooteater</title>
    <link rel="apple-touch-icon" sizes="57x57" href="assets/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="assets/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 保持原有样式不变 */
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .no-select {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        :root {
            --primary-color: #3B82F6;
            --secondary-color: #10B981;
            --accent-color: #8B5CF6;
            --neutral-color: #1F2937;
            --neutral-light-color: #F3F4F6;
            --window-bg: #ffffff;
            --titlebar-bg: #f1f5f9;
            --transition-time: 0.2s;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --resize-handle-size: 12px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all var(--transition-time) ease;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neutral-color);
        }

        .logo-text span {
            color: var(--primary-color);
        }

        .nav-links {
            display: none;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        @media (min-width: 768px) {
            .nav-links {
                display: flex;
            }
        }

        .nav-links li {
            margin-right: 20px;
        }

        .nav-link {
            position: relative;
            display: inline-block;
            padding: 10px 20px;
            color: var(--neutral-color);
            text-decoration: none;
            font-weight: 500;
        }

        .mobile-menu-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--neutral-color);
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .mobile-menu-button {
                display: none;
            }
        }

        nav a {
            font-family: 'Cascadia Code', Arial, sans-serif;
            font-size: 15px;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 4px;
            transition: all 0.8s ease;
            margin: 0 10px;
        }

        nav a:hover {
            color: rgb(32, 0, 70);
            transform: translateY(-2px);
            background-color: rgb(201, 242, 220);
        }

        .mode-switch {
            display: flex;
            align-items: center;
            background-color: var(--neutral-light-color);
            padding: 5px 10px;
            border-radius: 20px;
            margin-left: 20px;
        }

        .mode-switch span {
            font-size: 0.9rem;
            margin: 0 8px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--primary-color);
        }

        input:checked+.slider:before {
            transform: translateX(20px);
        }

        main {
            padding: 20px 0;
            position: relative;
            min-height: calc(100vh - 180px);
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--neutral-color);
            margin-bottom: 40px;
            position: relative;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            border-radius: 2px;
        }

        .window {
            position: absolute;
            width: 600px;
            background-color: var(--window-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all var(--transition-time) ease;
            z-index: 10;
            min-height: 400px;
            touch-action: none;
        }

        .window.active {
            z-index: 20;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .window-titlebar {
            background-color: var(--titlebar-bg);
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            border-bottom: 1px solid #e2e8f0;
            user-select: none;
        }

        .window-title {
            font-weight: 500;
            color: var(--neutral-color);
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1;
            margin: 0 12px;
        }

        .window-controls {
            display: flex;
            gap: 6px;
        }

        .window-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .window-btn.minimize {
            background-color: #facc15;
            color: #6b4a00;
        }

        .window-btn.maximize {
            background-color: #22c55e;
            color: #064e3b;
        }

        .window-btn.popout {
            background-color: #8b5cf6;
            color: #4c1d95;
        }

        .window-btn.close {
            background-color: #ef4444;
            color: #7f1d1d;
        }

        .window-btn:hover {
            transform: scale(1.1);
        }

        .window-content {
            padding: 16px;
            height: calc(100% - 42px);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--neutral-light-color);
        }

        .window-content::-webkit-scrollbar {
            width: 8px;
        }

        .window-content::-webkit-scrollbar-track {
            background: var(--neutral-light-color);
            border-radius: 4px;
        }

        .window-content::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        .resize-handle {
            position: absolute;
            right: 0;
            bottom: 0;
            width: var(--resize-handle-size);
            height: var(--resize-handle-size);
            cursor: nwse-resize;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Cpath d='M10 0L0 10M8 0L0 8M10 2L2 10' stroke='%23cbd5e1' stroke-width='1'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: bottom right;
            z-index: 5;
        }

        .resize-handle-top {
            top: 0;
            left: 0;
            right: 0;
            height: var(--resize-handle-size);
            cursor: ns-resize;
            background-image: none;
        }

        .resize-handle-left {
            top: 0;
            left: 0;
            bottom: 0;
            width: var(--resize-handle-size);
            cursor: ew-resize;
            background-image: none;
        }

        .resize-handle-right {
            top: 0;
            right: 0;
            bottom: 0;
            width: var(--resize-handle-size);
            cursor: ew-resize;
            background-image: none;
        }

        .resize-handle-bottom {
            left: 0;
            right: 0;
            bottom: 0;
            height: var(--resize-handle-size);
            cursor: ns-resize;
            background-image: none;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 8px;
        }

        .pagination-btn {
            padding: 6px 12px;
            border: 1px solid var(--primary-color);
            background-color: white;
            color: var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .pagination-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .content-card {
            padding: 20px;
            border-radius: 8px;
            background-color: var(--neutral-light-color);
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }

        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .card-icon-primary {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--primary-color);
        }

        .card-icon-secondary {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--secondary-color);
        }

        .card-icon-accent {
            background-color: rgba(139, 92, 246, 0.1);
            color: var(--accent-color);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--neutral-color);
        }

        .card-description {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .card-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            padding: 6px 0;
            transition: all 0.2s ease;
        }

        .card-link:hover {
            color: #2563eb;
            transform: translateX(3px);
        }

        #webListWindow {
            top: 20px;
            left: 20px;
            width: 600px;
            height: 600px;
        }

        .web-content-frame {
            width: 100%;
            height: 100%;
            border: none;
            min-height: 400px;
        }

        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            padding: 8px 16px;
            display: flex;
            gap: 8px;
            z-index: 50;
            overflow-x: auto;
            white-space: nowrap;
        }

        .taskbar-item {
            padding: 6px 12px;
            background-color: var(--neutral-light-color);
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            user-select: none;
        }

        .taskbar-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .window.minimized {
            display: none;
        }

        .window.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            border-radius: 0;
        }

        .fullscreen-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
            background-color: #000;
            z-index: 1000;
            display: none;
        }

        .fullscreen-overlay.active {
            display: block;
        }

        .fullscreen-content {
            width: 100%;
            height: 100%;
            border: none;
        }

        .exit-fullscreen {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
        }

        .traditional-mode main {
            display: block;
            padding: 40px 0;
        }

        .traditional-mode .window {
            display: none !important;
        }

        .traditional-mode .traditional-content {
            display: block;
        }

        /* 传统模式下的卡片容器 - 响应式布局 */
        .traditional-mode .cards-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            padding: 10px 0;
        }

        @media (min-width: 640px) {
            .traditional-mode .cards-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .traditional-mode .cards-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .traditional-mode .taskbar {
            display: none;
        }

        @media (max-width: 768px) {
            .window {
                width: 90%;
                left: 5% !important;
            }

            #webListWindow {
                width: 90%;
                height: 80vh;
            }

            .mode-switch span {
                display: none;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .window {
            animation: fadeIn 0.3s ease forwards;
        }

        .taskbar::-webkit-scrollbar {
            height: 4px;
        }

        .taskbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .taskbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 2px;
        }

        .traditional-content {
            display: none;
        }
    </style>
</head>

<body class="no-select traditional-mode">
    <!-- 导航栏 -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-text">Tools<span> on Web</span></div>
                </div>

                <div style="display: flex; align-items: center;">
                    <nav>
                        <ul class="nav-links">
                            <li><a href="index.html" class="nav-link">Home</a></li>
                            <li><a href="down.html" class="nav-link">Download</a></li>
                            <li><a href="vid.html" class="nav-link">Video</a></li>
                            <li><a href="SCMN.html" class="nav-link">Documents</a></li>
                            <li><a href="webs.html" class="nav-link">Web</a></li>
                            <li><a href="articals.html" class="nav-link">Articals</a></li>
                        </ul>
                    </nav>

                    <!-- 模式切换 -->
                    <div class="mode-switch">
                        <span>Traditional</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle">
                            <span class="slider"></span>
                        </label>
                        <span>Windowed</span>
                    </div>
                </div>

                <button class="mobile-menu-button">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="section">
            <h2 class="section-title">Tools</h2>

            <!-- 传统模式内容容器 -->
            <div class="traditional-content" id="traditionalContent">
                <div class="cards-container" id="traditionalWebItems">
                    <!-- 传统模式下的内容将通过JS复制 -->
                </div>

                <!-- 传统模式分页控件 -->
                <div class="pagination" id="traditionalPagination">
                    <!-- 分页按钮将通过JS生成 -->
                </div>
            </div>

            <!-- 网页列表窗口 -->
            <div id="webListWindow" class="window active">
                <div class="window-titlebar">
                    <div class="window-title">Tool List</div>
                    <div class="window-controls">
                        <button class="window-btn minimize" data-action="minimize"><i
                                class="fas fa-window-minimize"></i></button>
                        <button class="window-btn maximize" data-action="maximize"><i
                                class="fas fa-window-maximize"></i></button>
                        <button class="window-btn close" data-action="close"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="window-content">
                    <div class="cards-container" id="webItems">
                        <!-- 网页卡片内容 -->
                        <div class="content-card">
                            <div class="card-icon card-icon-primary">
                                <i class="fas fa-image"></i>
                            </div>
                            <h3 class="card-title">Chat online</h3>
                            <p class="card-description">Using textdb.online,each IP is limited to sending 500 messages per day.</p>
                            <a href="chat.html" target="_blank" class="card-link" data-title="Chat">
                                Chat <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-primary">
                                <i class="fas fa-image"></i>
                            </div>
                            <h3 class="card-title">Arch Terminal</h3>
                            <p class="card-description">It's complicated to code it.</p>
                            <a href="terminal.html" target="_blank" class="card-link" data-title="Arch Terminal">
                                Go to Terminal <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                         <div class="content-card">
                            <div class="card-icon card-icon-primary">
                                <i class="fas fa-image"></i>
                            </div>
                            <h3 class="card-title">Image Mixer</h3>
                            <p class="card-description">Easily blend multiple images to create unique visual effects and
                                artworks.</p>
                            <a href="PM.html" target="_blank" class="card-link" data-title="Image Mixer">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-accent">
                                <i class="fas fa-toolbox"></i>
                            </div>
                            <h3 class="card-title">Toolkit</h3>
                            <p class="card-description">A collection of practical tools to meet your various daily
                                needs.</p>
                            <a href="toolkit.html" target="_blank" class="card-link" data-title="Toolkit">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">Gravity Game</h3>
                            <p class="card-description">Experience a unique gravity physics game that challenges your
                                reaction skills and strategic thinking.</p>
                            <a href="Gravity.html" target="_blank" class="card-link" data-title="Gravity Game">
                                Start Game <i class="fas fa-gamepad"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">JS CPU test</h3>
                            <p class="card-description">Test CPU</p>
                            <a href="CPU.html" target="_blank" class="card-link" data-title="JS CPU Test">
                                Go <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">SC HR Helper</h3>
                            <p class="card-description">Help SC users</p>
                            <a href="simhr.html" target="_blank" class="card-link" data-title="SC HR Helper">
                                Use it! <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-qrcode"></i>
                            </div>
                            <h3 class="card-title">QR Code Generator</h3>
                            <p class="card-description">Quickly generate various types of QR codes for easy sharing of
                                links and information.</p>
                            <a href="qrcode.html" target="_blank" class="card-link" data-title="QR Code Generator">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-accent">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <h3 class="card-title">PPI Calculator</h3>
                            <p class="card-description">A convenient tool.</p>
                            <a href="ppi.html" target="_blank" class="card-link" data-title="PPI Calculator">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">Demonstration of Convex Lens Imaging Principle</h3>
                            <p class="card-description">Enable you to better understand the principle of convex lens
                                imaging</p>
                            <a href="glass.html" target="_blank" class="card-link" data-title="Convex Lens Imaging">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">Simulation of Laser Injection into Water</h3>
                            <p class="card-description">Enable you to better understand the principle of refraction</p>
                            <a href="refraction.html" target="_blank" class="card-link"
                                data-title="Laser Refraction Simulation">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">Stamp Generator</h3>
                            <p class="card-description">A electronic stamp generation tool that supports multiple templates for official seals, contract seals, financial seals, and legal representative seals. </p>
                            <a href="stamp.html" target="_blank" class="card-link" data-title="Stamp generator">
                                Go to Tool <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-primary">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h3 class="card-title">Edge Surf</h3>
                            <p class="card-description">Experience modified textures in this unique surfing game with
                                enhanced visuals.</p>
                            <a href="webs/surf/index.html" target="_blank" class="card-link" data-title="Edge Surf">
                                Start Game <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">HTML5 tower defense game</h3>
                            <p class="card-description">Good game by oldj.wu@gmail.com</p>
                            <a href="td.html" target="_blank" class="card-link" data-title="TowerDefense Game">
                                Start Game <i class="fas fa-gamepad"></i>
                            </a>
                        </div>


                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">BitBurner v0.45.0 </h3>
                            <p class="card-description">Idle by danielyxie@gmail.com</p>
                            <a href="webs/bitburner/index.html" target="_blank" class="card-link" data-title="Bit Burner">
                                Go <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>


                        <div class="content-card">
                            <div class="card-icon card-icon-primary">
                                <i class="fas fa-video"></i>
                            </div>
                            <h3 class="card-title">Interesting Contents</h3>
                            <p class="card-description">Watch interesting video content to explore unknown fields and
                                broaden your horizons.</p>
                            <a href="https://www.bilibili.com/video/BV1vt4y1N7Nh/" target="_blank" class="card-link"
                                data-title="Interesting Contents">
                                Watch Now <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-accent">
                                <i class="fas fa-cube"></i>
                            </div>
                            <h3 class="card-title">3D Exploration By 司令部总司令@Bilibili</h3>
                            <p class="card-description">Explore beautiful 3D models and scenes for an immersive visual
                                experience.</p>
                            <a href="3D1.html" target="_blank" class="card-link" data-title="3D Exploration V1">
                                V1 Start Exploration <i class="fas fa-cube"></i>
                            </a>
                            <a href="3D2.html" target="_blank" class="card-link" data-title="3D Exploration V2">
                                V2 Start Exploration <i class="fas fa-cube"></i>
                            </a>
                        </div>


                        <div class="content-card">
                            <div class="card-icon card-icon-primary">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h3 class="card-title">Scratch SFS by Orange_Town@Bilibili</h3>
                            <p class="card-description">Space flight simulator.</p>
                            <a href="SFS.html" target="_blank" class="card-link" data-title="Scratch SFS">
                                Start Game <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-accent">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <h3 class="card-title">SpaceCompany</h3>
                            <p class="card-description">From sparticle999. A classic space exploration and management
                                game.</p>
                            <a href="webs/SpaceCompany/index.html" target="_blank" class="card-link"
                                data-title="SpaceCompany">
                                Start Game <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>

                        <div class="content-card">
                            <div class="card-icon card-icon-secondary">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <h3 class="card-title">Sudoku</h3>
                            <p class="card-description">Play Sudoku(by zeroxiaobai@gmail.com)</p>
                            <a href="sudoku.html" target="_blank" class="card-link" data-title="Sudoku">
                                Play <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>

                    <!-- 窗口模式分页控件 -->
                    <div class="pagination" id="windowedPagination">
                        <!-- 分页按钮将通过JS生成 -->
                    </div>
                </div>
                <div class="resize-handle"></div>
                <div class="resize-handle-top"></div>
                <div class="resize-handle-left"></div>
                <div class="resize-handle-right"></div>
                <div class="resize-handle-bottom"></div>
            </div>

            <!-- 全屏容器 -->
            <div class="fullscreen-overlay" id="fullscreenOverlay">
                <button class="exit-fullscreen" id="exitFullscreen">
                    <i class="fas fa-times"></i>
                </button>
                <iframe class="fullscreen-content" id="fullscreenFrame"></iframe>
            </div>
        </section>
    </main>

    <!-- 任务栏 -->
    <div class="taskbar">
        <div class="taskbar-item active" data-window="webListWindow">
            <i class="fas fa-th-list"></i>
            <span>Web List</span>
        </div>
    </div>

    <script>
        // 窗口管理功能 - 优化版
        document.addEventListener('DOMContentLoaded', function () {
            // 工具函数 - 提取为通用方法
            const utils = {
                // 获取鼠标/触摸坐标
                getCoordinates(e) {
                    if (e.type.includes('mouse')) {
                        return { x: e.clientX, y: e.clientY };
                    } else if (e.type.includes('touch') && e.touches.length > 0) {
                        return { x: e.touches[0].clientX, y: e.touches[0].clientY };
                    }
                    return { x: 0, y: 0 };
                },

                // 节流函数
                throttle(func, limit) {
                    let lastCall = 0;
                    return function (...args) {
                        const now = Date.now();
                        if (now - lastCall >= limit) {
                            lastCall = now;
                            func.apply(this, args);
                        }
                    };
                },

                // 检查坐标是否在视口内
                isInsideViewport(x, y) {
                    return x >= 0 && x <= window.innerWidth &&
                        y >= 0 && y <= window.innerHeight;
                },

                // 限制值在范围内
                clamp(value, min, max) {
                    return Math.min(Math.max(value, min), max);
                }
            };

            // 窗口管理主对象
            const windowManager = {
                windows: {},
                windowCount: 1,
                taskbar: document.querySelector('.taskbar'),
                fullscreenOverlay: document.getElementById('fullscreenOverlay'),
                fullscreenFrame: document.getElementById('fullscreenFrame'),
                exitFullscreenBtn: document.getElementById('exitFullscreen'),
                modeToggle: document.getElementById('modeToggle'),
                webItems: document.getElementById('webItems'),
                traditionalWebItems: document.getElementById('traditionalWebItems'),
                windowedPagination: document.getElementById('windowedPagination'),
                traditionalPagination: document.getElementById('traditionalPagination'),

                // 分页配置
                pagination: {
                    itemsPerPage: 6,
                    currentPage: 1,
                    totalPages: 1,
                    allCards: []
                },

                // 初始化
                init() {
                    // 初始化列表窗口
                    this.windows.webListWindow = {
                        element: document.getElementById('webListWindow'),
                        title: 'Web Content List',
                        isMaximized: false,
                        originalSize: { width: '600px', height: '600px', top: '20px', left: '20px' },
                        eventListeners: [] // 存储事件监听以便清理
                    };

                    // 初始化卡片和分页
                    this.initCards();

                    // 初始化拖拽和调整大小功能
                    this.makeWindowDraggable(this.windows.webListWindow.element);
                    this.makeWindowResizable(this.windows.webListWindow.element);

                    // 初始化列表窗口的事件监听
                    this.initWindowControls(this.windows.webListWindow.element, 'webListWindow');

                    // 任务栏项目点击事件
                    this.initTaskbarEvents();

                    // 模式切换
                    this.modeToggle.addEventListener('change', (e) => this.handleModeChange(e));

                    // 全屏功能
                    this.exitFullscreenBtn.addEventListener('click', () => this.exitFullscreen());
                },

                // 初始化卡片数据
                initCards() {
                    // 仅在第一次加载或卡片为空时克隆卡片
                    if (this.pagination.allCards.length === 0) {
                        const originalCards = this.webItems.querySelectorAll('.content-card');
                        this.pagination.allCards = Array.from(originalCards).map(card => card.cloneNode(true));
                    }

                    this.pagination.totalPages = Math.ceil(this.pagination.allCards.length / this.pagination.itemsPerPage);
                    this.renderPagination(this.windowedPagination);
                    this.renderPagination(this.traditionalPagination);
                    this.showPage(1);

                    // 为传统模式卡片添加事件
                    this.addTraditionalModeCardEvents();
                },

                // 为传统模式卡片添加事件
                addTraditionalModeCardEvents() {
                    this.traditionalWebItems.querySelectorAll('.card-link').forEach(link => {
                        // 先移除可能存在的事件监听，避免重复绑定
                        const newLink = link.cloneNode(true);
                        link.parentNode.replaceChild(newLink, link);

                        newLink.addEventListener('click', (e) => {
                            if (!document.body.classList.contains('traditional-mode')) {
                                e.preventDefault();
                                const url = newLink.getAttribute('href');
                                const title = newLink.getAttribute('data-title');
                                this.openWebWindow(url, title);
                            }
                        });
                    });
                },

                // 渲染分页控件
                renderPagination(container) {
                    if (!container) return;

                    container.innerHTML = '';
                    const { currentPage, totalPages } = this.pagination;

                    // 上一页按钮
                    const prevBtn = document.createElement('button');
                    prevBtn.className = 'pagination-btn';
                    prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
                    prevBtn.disabled = currentPage === 1;
                    prevBtn.addEventListener('click', () => currentPage > 1 && this.showPage(currentPage - 1));
                    container.appendChild(prevBtn);

                    // 页码按钮 - 只显示当前页附近的页码，避免过多按钮
                    const renderPageNumber = (page) => {
                        const pageBtn = document.createElement('button');
                        pageBtn.className = `pagination-btn ${page === currentPage ? 'active' : ''}`;
                        pageBtn.textContent = page;
                        pageBtn.addEventListener('click', () => this.showPage(page));
                        container.appendChild(pageBtn);
                    };

                    // 显示第一页
                    renderPageNumber(1);

                    // 显示当前页附近的页码（省略中间过多的页码）
                    if (currentPage > 3) container.appendChild(document.createTextNode('...'));

                    for (let i = Math.max(2, currentPage - 1); i <= Math.min(totalPages - 1, currentPage + 1); i++) {
                        renderPageNumber(i);
                    }

                    if (currentPage < totalPages - 2) container.appendChild(document.createTextNode('...'));

                    // 显示最后一页（如果不是第一页）
                    if (totalPages > 1) renderPageNumber(totalPages);

                    // 下一页按钮
                    const nextBtn = document.createElement('button');
                    nextBtn.className = 'pagination-btn';
                    nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                    nextBtn.disabled = currentPage === totalPages;
                    nextBtn.addEventListener('click', () => currentPage < totalPages && this.showPage(currentPage + 1));
                    container.appendChild(nextBtn);
                },

                // 显示指定页的卡片
                showPage(page) {
                    this.pagination.currentPage = page;
                    const { itemsPerPage, allCards } = this.pagination;
                    const startIndex = (page - 1) * itemsPerPage;
                    const endIndex = Math.min(startIndex + itemsPerPage, allCards.length);
                    const currentCards = allCards.slice(startIndex, endIndex);

                    // 清空容器（使用DocumentFragment优化性能）
                    const webItemsFragment = document.createDocumentFragment();
                    const traditionalFragment = document.createDocumentFragment();

                    currentCards.forEach(card => {
                        // 为窗口模式创建卡片（带事件）
                        const clonedCard = card.cloneNode(true);
                        clonedCard.querySelectorAll('.card-link').forEach(link => {
                            link.addEventListener('click', (e) => {
                                if (!document.body.classList.contains('traditional-mode')) {
                                    e.preventDefault();
                                    this.openWebWindow(link.getAttribute('href'), link.getAttribute('data-title'));
                                }
                            });
                        });
                        webItemsFragment.appendChild(clonedCard);

                        // 为传统模式创建卡片（不带事件）
                        traditionalFragment.appendChild(card.cloneNode(true));
                    });

                    // 一次性更新DOM
                    this.webItems.innerHTML = '';
                    this.webItems.appendChild(webItemsFragment);

                    this.traditionalWebItems.innerHTML = '';
                    this.traditionalWebItems.appendChild(traditionalFragment);

                    // 更新分页控件
                    this.renderPagination(this.windowedPagination);
                    this.renderPagination(this.traditionalPagination);
                },

                // 窗口拖拽功能
                makeWindowDraggable(windowEl) {
                    // 如果是传统模式，不启用拖拽
                    if (document.body.classList.contains('traditional-mode')) return;

                    const titlebar = windowEl.querySelector('.window-titlebar');
                    if (!titlebar) return;

                    const windowId = windowEl.id;
                    const windowInfo = this.windows[windowId];
                    if (!windowInfo) return;

                    // 拖动状态变量
                    let isDragging = false;
                    let offsetX, offsetY;

                    // 鼠标按下开始拖动
                    const startDrag = (e) => {
                        // 如果是传统模式，不允许拖拽
                        if (document.body.classList.contains('traditional-mode')) return;

                        // 激活当前窗口
                        this.activateWindow(windowId);

                        // 获取窗口位置
                        const rect = windowEl.getBoundingClientRect();

                        // 计算鼠标/触摸点相对于窗口的偏移量
                        const coords = utils.getCoordinates(e);
                        offsetX = coords.x - rect.left;
                        offsetY = coords.y - rect.top;

                        // 标记为拖动中
                        isDragging = true;
                        windowEl.classList.add('dragging');
                        document.body.style.userSelect = 'none';

                        // 如果窗口处于最大化状态，则先恢复正常大小
                        if (windowInfo.isMaximized) {
                            this.handleWindowAction(windowId, 'maximize');

                            // 重新计算偏移量
                            const newRect = windowEl.getBoundingClientRect();
                            const newCoords = utils.getCoordinates(e);
                            offsetX = newCoords.x - newRect.left;
                            offsetY = newCoords.y - newRect.top;
                        }
                    };

                    // 鼠标移动时拖动窗口 - 使用节流优化性能
                    const drag = utils.throttle((e) => {
                        // 只有在拖动状态才响应
                        if (!isDragging) return;
                        e.preventDefault();

                        // 获取当前鼠标/触摸位置
                        const coords = utils.getCoordinates(e);

                        // 检查是否在视口内
                        if (utils.isInsideViewport(coords.x, coords.y)) {
                            // 计算新位置并限制在视口内
                            let newLeft = coords.x - offsetX;
                            let newTop = coords.y - offsetY;

                            // 限制窗口在视口内（留出10px边距）
                            newLeft = utils.clamp(newLeft, 10, window.innerWidth - windowEl.offsetWidth - 10);
                            newTop = utils.clamp(newTop, 10, window.innerHeight - windowEl.offsetHeight - 10);

                            // 使用requestAnimationFrame优化动画
                            requestAnimationFrame(() => {
                                windowEl.style.left = `${newLeft}px`;
                                windowEl.style.top = `${newTop}px`;

                                // 更新窗口信息中的原始位置
                                if (windowInfo) {
                                    windowInfo.originalSize.left = `${newLeft}px`;
                                    windowInfo.originalSize.top = `${newTop}px`;
                                }
                            });
                        }
                    }, 10); // 10ms节流

                    // 鼠标释放结束拖动
                    const stopDrag = () => {
                        if (!isDragging) return;

                        // 重置拖动状态
                        isDragging = false;
                        windowEl.classList.remove('dragging');
                        document.body.style.userSelect = '';
                    };

                    // 添加事件监听并记录，以便后续清理
                    titlebar.addEventListener('mousedown', startDrag);
                    titlebar.addEventListener('touchstart', startDrag, { passive: true });
                    document.addEventListener('mousemove', drag);
                    document.addEventListener('touchmove', drag, { passive: false });
                    document.addEventListener('mouseup', stopDrag);
                    document.addEventListener('touchend', stopDrag);
                    document.addEventListener('touchcancel', stopDrag);

                    // 保存事件监听以便后续清理
                    windowInfo.eventListeners.push(
                        { target: titlebar, type: 'mousedown', listener: startDrag },
                        { target: titlebar, type: 'touchstart', listener: startDrag, options: { passive: true } },
                        { target: document, type: 'mousemove', listener: drag },
                        { target: document, type: 'touchmove', listener: drag, options: { passive: false } },
                        { target: document, type: 'mouseup', listener: stopDrag },
                        { target: document, type: 'touchend', listener: stopDrag },
                        { target: document, type: 'touchcancel', listener: stopDrag }
                    );
                },

                // 窗口大小调整功能
                makeWindowResizable(windowEl) {
                    if (document.body.classList.contains('traditional-mode')) return;

                    const resizeHandles = {
                        bottomRight: windowEl.querySelector('.resize-handle'),
                        top: windowEl.querySelector('.resize-handle-top'),
                        left: windowEl.querySelector('.resize-handle-left'),
                        right: windowEl.querySelector('.resize-handle-right'),
                        bottom: windowEl.querySelector('.resize-handle-bottom')
                    };

                    const windowId = windowEl.id;
                    const windowInfo = this.windows[windowId];
                    if (!windowInfo) return;

                    // 状态变量
                    let isResizing = false;
                    let currentHandle = null;
                    let startX, startY;
                    let startWidth, startHeight;
                    let startLeft, startTop;

                    // 窗口尺寸限制
                    const minWidth = 300;
                    const minHeight = 200;
                    const maxWidth = window.innerWidth - 40; // 留出边距
                    const maxHeight = window.innerHeight - 40;

                    // 开始调整大小
                    const startResize = (e) => {
                        // 如果是传统模式，不允许调整大小
                        if (document.body.classList.contains('traditional-mode')) return;

                        // 激活当前窗口
                        this.activateWindow(windowId);

                        // 如果窗口处于最大化状态，则先恢复正常大小
                        if (windowInfo && windowInfo.isMaximized) {
                            this.handleWindowAction(windowId, 'maximize');
                        }

                        isResizing = true;
                        currentHandle = e.currentTarget.dataset.handle || e.target.closest('[data-handle]')?.dataset.handle;
                        const rect = windowEl.getBoundingClientRect();

                        // 记录起始位置和尺寸
                        const coords = utils.getCoordinates(e);
                        startX = coords.x;
                        startY = coords.y;

                        startWidth = rect.width;
                        startHeight = rect.height;
                        startLeft = rect.left;
                        startTop = rect.top;

                        document.body.style.userSelect = 'none';
                        windowEl.classList.add('resizing');

                        e.preventDefault();
                    };

                    // 调整大小过程 - 使用节流优化性能
                    const resize = utils.throttle((e) => {
                        if (!isResizing || !currentHandle) return;
                        e.preventDefault();

                        const coords = utils.getCoordinates(e);
                        const clientX = coords.x;
                        const clientY = coords.y;

                        // 使用requestAnimationFrame优化动画
                        requestAnimationFrame(() => {
                            // 根据不同的手柄类型计算新尺寸
                            switch (currentHandle) {
                                case 'bottomRight':
                                    const newWidthBR = utils.clamp(startWidth + (clientX - startX), minWidth, maxWidth);
                                    const newHeightBR = utils.clamp(startHeight + (clientY - startY), minHeight, maxHeight);
                                    windowEl.style.width = `${newWidthBR}px`;
                                    windowEl.style.height = `${newHeightBR}px`;
                                    break;

                                case 'right':
                                    const widthRight = utils.clamp(startWidth + (clientX - startX), minWidth, maxWidth);
                                    windowEl.style.width = `${widthRight}px`;
                                    break;

                                case 'left':
                                    const widthLeft = utils.clamp(startWidth - (clientX - startX), minWidth, maxWidth);
                                    const newLeft = utils.clamp(startLeft + (startWidth - widthLeft), 10, window.innerWidth - widthLeft - 10);
                                    windowEl.style.width = `${widthLeft}px`;
                                    windowEl.style.left = `${newLeft}px`;
                                    break;

                                case 'bottom':
                                    const heightBottom = utils.clamp(startHeight + (clientY - startY), minHeight, maxHeight);
                                    windowEl.style.height = `${heightBottom}px`;
                                    break;

                                case 'top':
                                    const heightTop = utils.clamp(startHeight - (clientY - startY), minHeight, maxHeight);
                                    const newTop = utils.clamp(startTop + (startHeight - heightTop), 10, window.innerHeight - heightTop - 10);
                                    windowEl.style.height = `${heightTop}px`;
                                    windowEl.style.top = `${newTop}px`;
                                    break;
                            }

                            // 更新窗口信息中的原始尺寸
                            if (windowInfo) {
                                windowInfo.originalSize.width = windowEl.style.width;
                                windowInfo.originalSize.height = windowEl.style.height;
                                windowInfo.originalSize.left = windowEl.style.left;
                                windowInfo.originalSize.top = windowEl.style.top;
                            }
                        });
                    }, 10); // 10ms节流

                    // 结束调整大小
                    const stopResize = () => {
                        if (!isResizing) return;

                        isResizing = false;
                        currentHandle = null;
                        document.body.style.userSelect = '';
                        windowEl.classList.remove('resizing');
                    };

                    // 为所有调整手柄添加事件监听
                    Object.keys(resizeHandles).forEach(handleType => {
                        const handle = resizeHandles[handleType];
                        if (!handle) return;

                        // 添加data属性标识手柄类型
                        handle.dataset.handle = handleType;

                        handle.addEventListener('mousedown', startResize);
                        handle.addEventListener('touchstart', startResize, { passive: true });

                        // 保存事件监听以便后续清理
                        windowInfo.eventListeners.push(
                            { target: handle, type: 'mousedown', listener: startResize },
                            { target: handle, type: 'touchstart', listener: startResize, options: { passive: true } }
                        );
                    });

                    // 添加全局事件监听
                    document.addEventListener('mousemove', resize);
                    document.addEventListener('touchmove', resize, { passive: false });
                    document.addEventListener('mouseup', stopResize);
                    document.addEventListener('touchend', stopResize);
                    document.addEventListener('touchcancel', stopResize);

                    // 保存事件监听以便后续清理
                    windowInfo.eventListeners.push(
                        { target: document, type: 'mousemove', listener: resize },
                        { target: document, type: 'touchmove', listener: resize, options: { passive: false } },
                        { target: document, type: 'mouseup', listener: stopResize },
                        { target: document, type: 'touchend', listener: stopResize },
                        { target: document, type: 'touchcancel', listener: stopResize }
                    );
                },

                // 清理窗口事件监听
                cleanupWindowEvents(windowId) {
                    const windowInfo = this.windows[windowId];
                    if (!windowInfo || !windowInfo.eventListeners) return;

                    // 移除所有事件监听
                    windowInfo.eventListeners.forEach(({ target, type, listener, options }) => {
                        target.removeEventListener(type, listener, options);
                    });

                    // 清空事件列表
                    windowInfo.eventListeners = [];
                },

                // 激活窗口（置于顶层）
                activateWindow(windowId) {
                    // 取消所有窗口的激活状态
                    Object.keys(this.windows).forEach(id => {
                        if (id !== windowId) {
                            this.windows[id].element.classList.remove('active');
                            const taskbarItem = document.querySelector(`.taskbar-item[data-window="${id}"]`);
                            if (taskbarItem) taskbarItem.classList.remove('active');
                        }
                    });

                    // 激活当前窗口
                    const windowEl = this.windows[windowId]?.element;
                    if (windowEl) {
                        windowEl.classList.add('active');

                        // 确保窗口在最上层
                        windowEl.style.zIndex = '100';
                        Object.keys(this.windows).forEach(id => {
                            if (id !== windowId) {
                                this.windows[id].element.style.zIndex = '10';
                            }
                        });

                        // 更新任务栏项目状态
                        const taskbarItem = document.querySelector(`.taskbar-item[data-window="${windowId}"]`);
                        if (taskbarItem) taskbarItem.classList.add('active');
                    }
                },

                // 初始化窗口控制按钮事件
                initWindowControls(windowEl, windowId) {
                    windowEl.querySelectorAll('.window-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            const action = btn.getAttribute('data-action');
                            this.handleWindowAction(windowId, action);
                        });
                    });
                },

                // 初始化任务栏事件
                initTaskbarEvents() {
                    this.taskbar.addEventListener('click', (e) => {
                        const taskbarItem = e.target.closest('.taskbar-item');
                        if (taskbarItem) {
                            const windowId = taskbarItem.getAttribute('data-window');
                            const winEl = this.windows[windowId]?.element;

                            if (winEl) {
                                if (winEl.classList.contains('minimized')) {
                                    winEl.classList.remove('minimized');
                                }
                                this.activateWindow(windowId);
                            }
                        }
                    });
                },

                // 处理窗口操作（最小化、最大化、关闭、弹出）
                handleWindowAction(windowId, action) {
                    const windowInfo = this.windows[windowId];
                    if (!windowInfo) return;

                    const windowEl = windowInfo.element;

                    switch (action) {
                        case 'minimize':
                            windowEl.classList.add('minimized');
                            break;

                        case 'maximize':
                            if (windowInfo.isMaximized) {
                                // 恢复原始大小
                                windowEl.style.width = windowInfo.originalSize.width;
                                windowEl.style.height = windowInfo.originalSize.height;
                                windowEl.style.top = windowInfo.originalSize.top;
                                windowEl.style.left = windowInfo.originalSize.left;
                                windowEl.classList.remove('maximized');
                                windowInfo.isMaximized = false;

                                // 更新最大化按钮图标
                                const maximizeBtn = windowEl.querySelector('.window-btn.maximize i');
                                if (maximizeBtn) maximizeBtn.className = 'fas fa-window-maximize';
                            } else {
                                // 保存原始大小和位置（只在未设置时保存）
                                if (!windowInfo.originalSize.width) {
                                    windowInfo.originalSize.width = `${windowEl.offsetWidth}px`;
                                    windowInfo.originalSize.height = `${windowEl.offsetHeight}px`;
                                    windowInfo.originalSize.top = `${windowEl.offsetTop}px`;
                                    windowInfo.originalSize.left = `${windowEl.offsetLeft}px`;
                                }

                                // 最大化窗口
                                windowEl.style.width = 'calc(100% - 20px)';
                                windowEl.style.height = 'calc(100% - 20px)';
                                windowEl.style.top = '10px';
                                windowEl.style.left = '10px';
                                windowEl.classList.add('maximized');
                                windowInfo.isMaximized = true;

                                // 更新最大化按钮图标
                                const maximizeBtn = windowEl.querySelector('.window-btn.maximize i');
                                if (maximizeBtn) maximizeBtn.className = 'fas fa-window-restore';
                            }
                            break;

                        case 'popout':
                            // 获取当前窗口的URL
                            const iframe = windowEl.querySelector('.web-content-frame');
                            if (iframe && iframe.src) {
                                try {
                                    // 在新标签页打开URL
                                    window.open(iframe.src, '_blank');

                                    // 关闭当前窗口
                                    this.handleWindowAction(windowId, 'close');
                                } catch (error) {
                                    console.error('Failed to open popout window:', error);
                                    alert('无法打开新窗口，请检查浏览器设置');
                                }
                            }
                            break;

                        case 'close':
                            // 清理事件监听
                            this.cleanupWindowEvents(windowId);

                            // 从窗口列表中移除
                            delete this.windows[windowId];

                            // 移除DOM元素
                            windowEl.remove();

                            // 移除任务栏项目
                            const taskbarItem = document.querySelector(`.taskbar-item[data-window="${windowId}"]`);
                            if (taskbarItem) taskbarItem.remove();

                            // 如果没有窗口了，激活列表窗口
                            if (Object.keys(this.windows).length === 0) {
                                this.createWebListWindow();
                            }
                            break;
                    }
                },

                // 创建新的网页窗口
                openWebWindow(url, title) {
                    try {
                        // 创建唯一ID
                        const windowId = `webWindow_${this.windowCount++}`;

                        // 创建窗口元素
                        const windowEl = document.createElement('div');
                        windowEl.id = windowId;
                        windowEl.className = 'window';

                        // 计算初始位置（避免重叠）
                        const offset = (this.windowCount * 20) % 200;
                        windowEl.style.top = `${50 + offset}px`;
                        windowEl.style.left = `${50 + offset}px`;
                        windowEl.style.width = '800px';
                        windowEl.style.height = '600px';

                        // 设置窗口内容，添加弹出按钮
                        windowEl.innerHTML = `
                        <div class="window-titlebar">
                            <div class="window-title">${title}</div>
                            <div class="window-controls">
                                <button class="window-btn minimize" data-action="minimize"><i class="fas fa-window-minimize"></i></button>
                                <button class="window-btn maximize" data-action="maximize"><i class="fas fa-window-maximize"></i></button>
                                <button class="window-btn popout" data-action="popout"><i class="fas fa-external-link-alt"></i></button>
                                <button class="window-btn close" data-action="close"><i class="fas fa-times"></i></button>
                            </div>
                        </div>
                        <div class="window-content" style="padding: 0; overflow: hidden;">
                            <iframe class="web-content-frame" src="${url}" loading="lazy"></iframe>
                        </div>
                        <div class="resize-handle" data-handle="bottomRight"></div>
                        <div class="resize-handle-top" data-handle="top"></div>
                        <div class="resize-handle-left" data-handle="left"></div>
                        <div class="resize-handle-right" data-handle="right"></div>
                        <div class="resize-handle-bottom" data-handle="bottom"></div>
                    `;

                        // 添加到文档
                        document.querySelector('main').appendChild(windowEl);

                        // 添加到窗口列表
                        this.windows[windowId] = {
                            element: windowEl,
                            title: title,
                            isMaximized: false,
                            originalSize: {
                                width: '800px',
                                height: '600px',
                                top: `${50 + offset}px`,
                                left: `${50 + offset}px`
                            },
                            eventListeners: []
                        };

                        // 为窗口添加事件监听
                        this.initWindowControls(windowEl, windowId);

                        // 初始化拖拽和调整大小功能
                        this.makeWindowDraggable(windowEl);
                        this.makeWindowResizable(windowEl);

                        // 创建任务栏项目
                        const taskbarItem = document.createElement('div');
                        taskbarItem.className = 'taskbar-item';
                        taskbarItem.setAttribute('data-window', windowId);
                        taskbarItem.innerHTML = `<i class="fas fa-window-maximize"></i> <span>${title}</span>`;
                        this.taskbar.appendChild(taskbarItem);

                        // 激活新窗口
                        this.activateWindow(windowId);
                    } catch (error) {
                        console.error('Failed to open web window:', error);
                        alert('打开窗口失败: ' + error.message);
                    }
                },

                // 创建网页列表窗口（如果被关闭）
                createWebListWindow() {
                    const existingWindow = document.getElementById('webListWindow');
                    if (existingWindow) return;

                    const windowEl = document.createElement('div');
                    windowEl.id = 'webListWindow';
                    windowEl.className = 'window active';
                    windowEl.style.top = '20px';
                    windowEl.style.left = '20px';
                    windowEl.style.width = '600px';
                    windowEl.style.height = '600px';

                    // 复制原始窗口内容
                    windowEl.innerHTML = `
                    <div class="window-titlebar">
                        <div class="window-title">Web Content List</div>
                        <div class="window-controls">
                            <button class="window-btn minimize" data-action="minimize"><i class="fas fa-window-minimize"></i></button>
                            <button class="window-btn maximize" data-action="maximize"><i class="fas fa-window-maximize"></i></button>
                            <button class="window-btn close" data-action="close"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <div class="window-content">
                        <div class="cards-container" id="webItems">
                            <!-- 内容将通过JS重新填充 -->
                        </div>
                        <div class="pagination" id="windowedPagination">
                            <!-- 分页按钮将通过JS生成 -->
                        </div>
                    </div>
                    <div class="resize-handle" data-handle="bottomRight"></div>
                    <div class="resize-handle-top" data-handle="top"></div>
                    <div class="resize-handle-left" data-handle="left"></div>
                    <div class="resize-handle-right" data-handle="right"></div>
                    <div class="resize-handle-bottom" data-handle="bottom"></div>
                `;

                    document.querySelector('main').appendChild(windowEl);

                    // 更新全局引用
                    this.webItems = document.getElementById('webItems');
                    this.windowedPagination = document.getElementById('windowedPagination');

                    // 重新初始化卡片
                    this.initCards();

                    // 添加到窗口列表
                    this.windows.webListWindow = {
                        element: windowEl,
                        title: 'Web Content List',
                        isMaximized: false,
                        originalSize: { width: '600px', height: '600px', top: '20px', left: '20px' },
                        eventListeners: []
                    };

                    // 添加事件监听
                    this.initWindowControls(windowEl, 'webListWindow');

                    // 初始化拖拽和调整大小功能
                    this.makeWindowDraggable(windowEl);
                    this.makeWindowResizable(windowEl);

                    // 确保任务栏有项目
                    let taskbarItem = document.querySelector('.taskbar-item[data-window="webListWindow"]');
                    if (!taskbarItem) {
                        taskbarItem = document.createElement('div');
                        taskbarItem.className = 'taskbar-item active';
                        taskbarItem.setAttribute('data-window', 'webListWindow');
                        taskbarItem.innerHTML = `<i class="fas fa-th-list"></i> <span>Web List</span>`;
                        this.taskbar.appendChild(taskbarItem);
                    }
                },

                // 处理模式切换
                handleModeChange(e) {
                    if (e.target.checked) {
                        // 切换到窗口模式
                        document.body.classList.remove('traditional-mode');
                        document.querySelectorAll('.window').forEach(window => {
                            window.style.display = 'block';
                        });
                        this.taskbar.style.display = 'flex';
                    } else {
                        // 切换到传统模式
                        document.body.classList.add('traditional-mode');
                    }
                },

                // 退出全屏
                exitFullscreen() {
                    this.fullscreenOverlay.classList.remove('active');
                    this.fullscreenFrame.src = '';
                }
            };

            // 初始化窗口管理器
            windowManager.init();

            // 暴露全局引用便于调试（生产环境可移除）
            window.windowManager = windowManager;
        });
    </script>

</body>

</html>